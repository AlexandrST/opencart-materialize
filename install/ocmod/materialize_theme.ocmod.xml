<?xml version="1.0" encoding="utf-8"?>
<modification>
	<name><![CDATA[<font color="#263238"><b>Materialize Theme</b></font>]]></name>
	<code>materialize-theme</code>
	<version>0.63.3</version>
	<author><![CDATA[<font color="#263238"><b>Trydalcoholic</b></font>]]></author>
	<link>https://github.com/trydalcoholic</link>
	<!-- Subcategory chip -->
	<file path="catalog/controller/product/category.php">
		<operation error="log">
			<search><![CDATA[$data['categories'][] = array(]]></search>
			<add position="replace" offset="3" trim="true"><![CDATA[
				if ($result['image']) {
					$image = $this->model_tool_image->resize($result['image'], 32, 32);
				} else {
					$image = '';
				}

				$data['categories'][] = array(
					'name' => $result['name'] . ($this->config->get('config_product_count') ? ' (' . $this->model_catalog_product->getTotalProducts($filter_data) . ')' : ''),
					'href' => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '_' . $result['category_id'] . $url),
					'thumb' => $image
				);
			]]></add>
		</operation>
	</file>
	<!-- Other Materialize Settings -->
	<file path="catalog/controller/common/footer.php">
		<operation error="log">
			<search><![CDATA[$data['contact'] = $this->url->link('information/contact');]]></search>
			<add position="before" trim="true"><![CDATA[
				$data['name'] = $this->config->get('config_name');
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/product.php">
		<operation error="log">
			<search><![CDATA[$data['points'] = $product_info['points'];]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['lang'] = $this->language->get('code');
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$this->load->language('product/product');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['url_page'] = (isset($this->request->server['HTTPS']) && (($this->request->server['HTTPS'] == 'on') || ($this->request->server['HTTPS'] == '1')) ? HTTPS_SERVER : HTTP_SERVER) . substr($this->request->server['REQUEST_URI'], 1, (strlen($this->request->server['REQUEST_URI'])-1));
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$data['points'] = $product_info['points'];]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['pricecurrency'] = $this->session->data['currency'];
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$data['rating'] = (int)$product_info['rating'];]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['reviewCount'] = sprintf((int)$product_info['reviews']);
			]]></add>
		</operation>
	</file>
	<!-- Getting the size of the logo -->
	<file path="catalog/controller/common/header.php">
		<operation error="log">
			<search><![CDATA[$data['logo'] = $server . 'image/' . $this->config->get('config_logo');]]></search>
			<add position="after" trim="true"><![CDATA[
				list($logo_width, $logo_height) = getimagesize($data['logo']);
				$data['logo_height'] = $logo_height;
				$data['logo_width'] = $logo_width;
			]]></add>
		</operation>
	</file>
	<!-- Common language settings Materialize -->
	<file path="catalog/controller/common/header.php">
		<operation error="skip">
			<search><![CDATA[$data['text_all'] = $this->language->get('text_all');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['text_contact'] = $this->language->get('text_contact');
				$data['text_about'] = $this->language->get('text_about');
				$data['text_delivery'] = $this->language->get('text_delivery');
				$data['text_call_back'] = $this->language->get('text_call_back');
				$data['text_call_free'] = $this->language->get('text_call_free');
			]]></add>
		</operation>
		<operation error="skip">
			<search><![CDATA[$data['name'] = $this->config->get('config_name');]]></search>
			<add position="after" trim="true"><![CDATA[
			$data['email'] = $this->config->get('config_email');
			$data['open'] = nl2br($this->config->get('config_open'));
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/common/footer.php">
		<operation error="skip">
			<search><![CDATA[$data['text_newsletter'] = $this->language->get('text_newsletter');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['text_social_network'] = $this->language->get('text_social_network');
				$data['text_cb_title'] = $this->language->get('text_cb_title');
				$data['text_cb_your_name'] = $this->language->get('text_cb_your_name');
				$data['text_cb_your_tel'] = $this->language->get('text_cb_your_tel');
				$data['text_cb_btn'] = $this->language->get('text_cb_btn');
			]]></add>
		</operation>
		<operation error="skip">
			<search><![CDATA[$data['powered'] = sprintf($this->language->get('text_powered'), $this->config->get('config_name'), date('Y', time()));]]></search>
			<add position="after" trim="true"><![CDATA[
			$data['email'] = $this->config->get('config_email');
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/common/cart.php">
		<operation error="skip">
			<search><![CDATA[$data['text_loading'] = $this->language->get('text_loading');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['text_shopping_cart'] = $this->language->get('text_shopping_cart');
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/search.php">
		<operation error="skip">
			<search><![CDATA[$data['text_limit'] = $this->language->get('text_limit');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['text_searched'] = $this->language->get('text_searched');
				$data['text_refine'] = $this->language->get('text_refine');
				$data['text_sort_short'] = $this->language->get('text_sort_short');
				$data['text_percent'] = $this->language->get('text_percent');
				$data['text_yes'] = $this->language->get('text_yes');
				$data['text_no'] = $this->language->get('text_no');
				$data['text_more_detailed'] = $this->language->get('text_more_detailed');
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/category.php">
		<operation error="skip">
			<search><![CDATA[$data['text_limit'] = $this->language->get('text_limit');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['text_sort_short'] = $this->language->get('text_sort_short');
				$data['text_percent'] = $this->language->get('text_percent');
				$data['text_yes'] = $this->language->get('text_yes');
				$data['text_no'] = $this->language->get('text_no');
				$data['text_more_detailed'] = $this->language->get('text_more_detailed');
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/product.php">
		<operation error="skip">
			<search><![CDATA[$data['text_loading'] = $this->language->get('text_loading');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['text_category'] = $this->language->get('text_category');
				$data['text_percent'] = $this->language->get('text_percent');
				$data['text_bonus_points'] = $this->language->get('text_bonus_points');
				$data['text_end_promotion'] = $this->language->get('text_end_promotion');
				$data['text_payment_method'] = $this->language->get('text_payment_method');
				$data['text_percent'] = $this->language->get('text_percent');
				$data['text_more_detailed'] = $this->language->get('text_more_detailed');
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/manufacturer.php">
		<operation error="skip">
			<search><![CDATA[$data['text_empty'] = $this->language->get('text_empty');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['text_manufacturers_starting'] = $this->language->get('text_manufacturers_starting');
				$data['text_view_all_products'] = $this->language->get('text_view_all_products');
				$data['text_sort_short'] = $this->language->get('text_sort_short');
				$data['text_percent'] = $this->language->get('text_percent');
				$data['text_more_detailed'] = $this->language->get('text_more_detailed');
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/special.php">
		<operation error="skip">
			<search><![CDATA[$data['text_limit'] = $this->language->get('text_limit');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['text_sort_short'] = $this->language->get('text_sort_short');
				$data['text_percent'] = $this->language->get('text_percent');
				$data['text_more_detailed'] = $this->language->get('text_more_detailed');
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/latest.php">
		<operation error="skip">
			<search><![CDATA[$data['text_tax'] = $this->language->get('text_tax');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['text_percent'] = $this->language->get('text_percent');
				$data['text_more_detailed'] = $this->language->get('text_more_detailed');
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/bestseller.php">
		<operation error="skip">
			<search><![CDATA[$data['text_tax'] = $this->language->get('text_tax');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['text_percent'] = $this->language->get('text_percent');
				$data['text_more_detailed'] = $this->language->get('text_more_detailed');
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/featured.php">
		<operation error="skip">
			<search><![CDATA[$data['text_tax'] = $this->language->get('text_tax');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['text_percent'] = $this->language->get('text_percent');
				$data['text_more_detailed'] = $this->language->get('text_more_detailed');
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/special.php">
		<operation error="skip">
			<search><![CDATA[$data['text_tax'] = $this->language->get('text_tax');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['text_percent'] = $this->language->get('text_percent');
				$data['text_more_detailed'] = $this->language->get('text_more_detailed');
			]]></add>
		</operation>
	</file>
	<!-- Add base64 loader -->
	<file path="catalog/controller/common/cart.php">
		<operation error="log">
			<search><![CDATA[public function index() {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/category.php">
		<operation error="log">
			<search><![CDATA[public function index() {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/compare.php">
		<operation error="log">
			<search><![CDATA[public function index() {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/manufacturer.php">
		<operation error="log">
			<search><![CDATA[public function index() {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[public function info() {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/product.php">
		<operation error="log">
			<search><![CDATA[public function index() {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[public function review() {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/search.php">
		<operation error="log">
			<search><![CDATA[public function index() {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/special.php">
		<operation error="log">
			<search><![CDATA[public function index() {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/latest.php">
		<operation error="log">
			<search><![CDATA[public function index($setting) {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/carousel.php">
		<operation error="log">
			<search><![CDATA[public function index($setting) {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/banner.php">
		<operation error="log">
			<search><![CDATA[public function index($setting) {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/bestseller.php">
		<operation error="log">
			<search><![CDATA[public function index($setting) {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/featured.php">
		<operation error="log">
			<search><![CDATA[public function index($setting) {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/special.php">
		<operation error="log">
			<search><![CDATA[public function index($setting) {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/checkout/cart.php">
		<operation error="log">
			<search><![CDATA[public function index() {]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			]]></add>
		</operation>
	</file>
	<!-- Add category in product card -->
	<file path="catalog/controller/product/product.php">
		<operation error="log">
			<search><![CDATA[$this->document->setDescription($product_info['meta_description']);]]></search>
			<add position="replace" trim="true"><![CDATA[
				$this->document->setDescription($product_info['meta_description']);
				$this->load->model('catalog/category');
				$catprod = array();
				$product_category = $this->model_catalog_product->getCategories($product_id);
				foreach ($product_category as $product_cat) {
					$category_info = $this->model_catalog_category->getCategory($product_cat['category_id']);
					if ($category_info) {
						$data['category_products'][] = array(
							'name'     => $category_info['name'],
							'href'     => $this->url->link('product/category', 'path=' . $category_info['category_id'])
						);
					}
				}
			]]></add>
		</operation>
	</file>
	<!-- End of promotion -->
	<file path="catalog/model/catalog/product.php">
		<operation error="log">
			<search><![CDATA[public function getProducts($data = array()) {]]></search>
			<add position="before" trim="true"><![CDATA[
				public function getProductSpec($product_id) {
					$sql = $this->db->query("SELECT ps.date_end FROM " . DB_PREFIX . "product_special ps WHERE product_id = '" . (int)$product_id . "' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC");
					if ($sql->num_rows) {
						return $sql->row['date_end'];
					} else {
						return false;
					}
				}
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/product.php">
		<operation error="log">
			<search><![CDATA[$product_info = $this->model_catalog_product->getProduct($product_id);]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['product_spec'] = $this->model_catalog_product->getProductSpec($product_id);
			]]></add>
		</operation>
	</file>
	<!-- Add compare -->
	<file path="catalog/controller/common/header.php">
		<operation error="log">
			<search><![CDATA[$data['home'] = $this->url->link('common/home');]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['compare'] = $this->url->link('product/compare');
				$this->language->load('product/compare');
				$data['text_compare'] = sprintf($this->language->get('text_compare'), (isset($this->session->data['compare']) ? count($this->session->data['compare']) : 0));
			]]></add>
		</operation>
	</file>
	<!-- Sort by availability -->
	<file path="catalog/model/catalog/product.php">
		<operation error="log">
			<search><![CDATA[$sql .= " ORDER BY LCASE(" . $data['sort'] . ")";]]></search>
			<add position="replace" trim="true"><![CDATA[
				$sql .= " ORDER BY (p.quantity>0) DESC, LCASE(" . $data['sort'] . ")";
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$sql .= " ORDER BY (CASE WHEN special IS NOT NULL THEN special WHEN discount IS NOT NULL THEN discount ELSE p.price END)";]]></search>
			<add position="replace" trim="true"><![CDATA[
				$sql .= " ORDER BY (p.quantity>0) DESC, (CASE WHEN special IS NOT NULL THEN special WHEN discount IS NOT NULL THEN discount ELSE p.price END)";
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$sql .= " ORDER BY " . $data['sort'];]]></search>
			<add position="replace" trim="true"><![CDATA[
				$sql .= " ORDER BY (p.quantity>0) DESC," . $data['sort'];
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$sql .= " ORDER BY p.sort_order";]]></search>
			<add position="replace" trim="true"><![CDATA[
				$sql .= " ORDER BY (p.quantity>0) DESC, p.sort_order";
			]]></add>
		</operation>
	</file>
	<!-- Instock on category page -->
	<file path="catalog/controller/product/category.php">
		<operation error="log">
			<search><![CDATA[$data['breadcrumbs'] = array();]]></search>
			<add position="before" trim="true"><![CDATA[
				if (isset($this->request->get['instock'])) {
					$instock = $this->request->get['instock'];
				} else {
					$instock = '';
				}
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$data['button_cart'] = $this->language->get('button_cart');]]></search>
			<add position="before" trim="true"><![CDATA[
				$data['entry_instock'] = $this->language->get('entry_instock');
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$filter,]]></search>
			<add position="after" trim="true"><![CDATA[
				'filter_instock'     => $instock,
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$data['limit'] = $limit;]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['url'] = html_entity_decode($this->url->link('product/category', 'path=' . $this->request->get['path'] . $url), ENT_QUOTES, 'UTF-8');
				$data['instock'] = $instock;
			]]></add>
		</operation>
	</file>
	<file path="catalog/model/catalog/product.php">
		<operation error="log">
			<search><![CDATA[if (!empty($data['filter_name']) || !empty($data['filter_tag'])) {]]></search>
			<add position="before" trim="true"><![CDATA[
				if (!empty($data['filter_instock'])) {
					$sql .= " AND (p.stock_status_id = '7' OR p.quantity > 0)";
				}
			]]></add>
		</operation>
	</file>
	<!-- Image compression off -->
	<file path="system/library/image.php">
		<operation error="log">
			<search><![CDATA[public function save($file, $quality = 90) {]]></search>
			<add position="replace" trim="true"><![CDATA[
			public function save($file) {
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[imagejpeg($this->image, $file, $quality);]]></search>
			<add position="replace" trim="true"><![CDATA[
			imagejpeg($this->image, $file);
			]]></add>
		</operation>
	</file>
	<!-- Display weight in product card -->
	<file path="system/library/cart/weight.php">
		<operation error="log">
			<search><![CDATA[public function format($value, $weight_class_id, $decimal_point = '.', $thousand_point = ',') {]]></search>
			<add position="replace" trim="true"><![CDATA[
			public function format($value, $weight_class_id, $decimal_point = '.', $thousand_point = '') {
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[return number_format($value, 2, $decimal_point, $thousand_point) . $this->weights[$weight_class_id]['unit'];]]></search>
			<add position="replace" trim="true"><![CDATA[
			return number_format($value, 0, $decimal_point, $thousand_point) . $this->weights[$weight_class_id]['unit'];
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[return number_format($value, 2, $decimal_point, $thousand_point);]]></search>
			<add position="replace" trim="true"><![CDATA[
			return number_format($value, 0, $decimal_point, $thousand_point);
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/product.php">
		<operation error="log">
			<search><![CDATA[$data['text_tags'] = $this->language->get('text_tags');]]></search>
			<add position="after" trim="true"><![CDATA[
			$data['text_weight'] = $this->language->get('text_weight');
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$data['points'] = $product_info['points'];]]></search>
			<add position="after" trim="true"><![CDATA[
			$data['weight'] = $this->weight->format($product_info['weight'], $product_info['weight_class_id']);
			]]></add>
		</operation>
	</file>
	<!-- Add badges in category product count -->
	<file path="catalog/controller/common/header.php">
		<operation error="log">
			<search><![CDATA['name'  => $child['name'] . ($this->config->get('config_product_count') ? ' (' . $this->model_catalog_product->getTotalProducts($filter_data) . ')' : ''),]]></search>
			<add position="replace" trim="true"><![CDATA[
			'name'  => $child['name'] . ($this->config->get('config_product_count') ? ' <span class="badge blue-grey lighten-2 grey-text text-lighten-4 right">' . $this->model_catalog_product->getTotalProducts($filter_data) . '</span>' : ''),
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/category.php">
		<operation error="log">
			<search><![CDATA['name' => $child['name'] . ($this->config->get('config_product_count') ? ' (' . $this->model_catalog_product->getTotalProducts($filter_data) . ')' : ''),]]></search>
			<add position="replace" trim="true"><![CDATA[
			'name' => $child['name'] . ($this->config->get('config_product_count') ? ' <span class="badge blue-grey lighten-2 grey-text text-lighten-4 right">' . $this->model_catalog_product->getTotalProducts($filter_data) . '</span>' : ''),
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA['name'        => $category['name'] . ($this->config->get('config_product_count') ? ' (' . $this->model_catalog_product->getTotalProducts($filter_data) . ')' : ''),]]></search>
			<add position="replace" trim="true"><![CDATA[
			'name'        => $category['name'] . ($this->config->get('config_product_count') ? ' <span class="badge blue-grey lighten-2 grey-text text-lighten-4 right">' . $this->model_catalog_product->getTotalProducts($filter_data) . '</span>' : ''),
			]]></add>
		</operation>
	</file>
	<!-- Related products -->
	<file path="admin/model/catalog/product.php">
		<operation error="log">
			<search><![CDATA[$this->db->query("DELETE FROM " . DB_PREFIX . "product_related WHERE product_id = '" . (int)$related_id . "' AND related_id = '" . (int)$product_id . "'");]]></search>
			<add position="replace" trim="true"><![CDATA[
			// $this->db->query("DELETE FROM " . DB_PREFIX . "product_related WHERE product_id = '" . (int)$related_id . "' AND related_id = '" . (int)$product_id . "'");
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$this->db->query("INSERT INTO " . DB_PREFIX . "product_related SET product_id = '" . (int)$related_id . "', related_id = '" . (int)$product_id . "'");]]></search>
			<add position="replace" trim="true"><![CDATA[
			// $this->db->query("INSERT INTO " . DB_PREFIX . "product_related SET product_id = '" . (int)$related_id . "', related_id = '" . (int)$product_id . "'");
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$this->db->query("DELETE FROM " . DB_PREFIX . "product_related WHERE related_id = '" . (int)$product_id . "'");]]></search>
			<add position="replace" trim="true"><![CDATA[
			// $this->db->query("DELETE FROM " . DB_PREFIX . "product_related WHERE related_id = '" . (int)$product_id . "'");
			]]></add>
		</operation>
	</file>
	<!-- Disable button cart -->
	<file path="admin/controller/catalog/product.php">
		<operation error="log">
			<search><![CDATA[if (isset($this->request->post['status'])) {]]></search>
			<add position="before" trim="true"><![CDATA[
			if (isset($this->request->post['add_cart'])) {
				$data['add_cart'] = $this->request->post['add_cart'];
			} else if (!empty($product_info)) {
				$data['add_cart'] = $product_info['add_cart'];
			} else {
				$data['add_cart'] = true;
			}
			]]></add>
		</operation>
		<operation error="log">
			<search index="1"><![CDATA[$data['entry_status'] = $this->language->get('entry_status');]]></search>
			<add position="before" trim="true"><![CDATA[
			$data['entry_cart'] = $this->language->get('entry_cart');
			]]></add>
		</operation>
	</file>
	<file path="admin/model/catalog/product.php">
		<operation error="log">
			<search><![CDATA[if (isset($data['image'])) {]]></search>
			<add position="before" trim="true"><![CDATA[
			if (isset($data['add_cart'])) {
				$this->db->query("UPDATE " . DB_PREFIX . "product SET add_cart = '" . $this->db->escape($data['add_cart']) . "' WHERE product_id = '" . (int)$product_id . "'");
			}
			]]></add>
		</operation>
	</file>
	<file path="admin/view/template/catalog/product_form.tpl">
		<operation error="log">
            <search><![CDATA[<label class="col-sm-2 control-label" for="input-status"><?php echo $entry_status; ?></label>]]></search>
            <add position="before" offset="1" trim="true"><![CDATA[
			<div class="form-group">
                <label class="col-sm-2 control-label" for="input-cart"><?php echo $entry_cart; ?></label>
                <div class="col-sm-10">
                  <select name="add_cart" id="input-cart" class="form-control">
                    <?php if ($add_cart) { ?>
                    <option value="1" selected="selected"><?php echo $text_enabled; ?></option>
                    <option value="0"><?php echo $text_disabled; ?></option>
                    <?php } else { ?>
                    <option value="1"><?php echo $text_enabled; ?></option>
                    <option value="0" selected="selected"><?php echo $text_disabled; ?></option>
                    <?php } ?>
                  </select>
                </div>
              </div>
            ]]></add>
        </operation>
	</file>
	<file path="catalog/controller/product/product.php">
		<operation error="log">
			<search><![CDATA[$data['rating'] = (int)$product_info['rating'];]]></search>
			<add position="before" trim="true"><![CDATA[
			$data['add_cart'] = (int)$product_info['add_cart'];
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA['product_id'  => $result['product_id'],]]></search>
			<add position="before" trim="true"><![CDATA[
			'add_cart'    => (int)$result['add_cart'],
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/manufacturer.php">
		<operation error="log">
			<search><![CDATA['product_id'  => $result['product_id'],]]></search>
			<add position="before" trim="true"><![CDATA[
			'add_cart'    => (int)$result['add_cart'],
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/special.php">
		<operation error="log">
			<search><![CDATA['product_id'  => $result['product_id'],]]></search>
			<add position="before" trim="true"><![CDATA[
			'add_cart'    => (int)$result['add_cart'],
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/category.php">
		<operation error="log">
			<search><![CDATA['product_id'  => $result['product_id'],]]></search>
			<add position="before" trim="true"><![CDATA[
			'add_cart'    => (int)$result['add_cart'],
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/compare.php">
		<operation error="log">
			<search><![CDATA['product_id'   => $product_info['product_id'],]]></search>
			<add position="before" trim="true"><![CDATA[
			'add_cart'     => (int)$product_info['add_cart'],
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/latest.php">
		<operation error="log">
			<search><![CDATA['product_id'  => $result['product_id'],]]></search>
			<add position="before" trim="true"><![CDATA[
			'add_cart'    => (int)$result['add_cart'],
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/special.php">
		<operation error="log">
			<search><![CDATA['product_id'  => $result['product_id'],]]></search>
			<add position="before" trim="true"><![CDATA[
			'add_cart'    => (int)$result['add_cart'],
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/bestseller.php">
		<operation error="log">
			<search><![CDATA['product_id'  => $result['product_id'],]]></search>
			<add position="before" trim="true"><![CDATA[
			'add_cart'    => (int)$result['add_cart'],
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/featured.php">
		<operation error="log">
			<search><![CDATA['product_id'  => $product_info['product_id'],]]></search>
			<add position="before" trim="true"><![CDATA[
			'add_cart'    => (int)$product_info['add_cart'],
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/account/wishlist.php">
		<operation error="log">
			<search><![CDATA['product_id' => $product_info['product_id'],]]></search>
			<add position="before" trim="true"><![CDATA[
			'add_cart'   => (int)$product_info['add_cart'],
			]]></add>
		</operation>
	</file>
	<file path="catalog/model/catalog/product.php">
		<operation error="log">
			<search><![CDATA['viewed'           => $query->row['viewed']]]></search>
			<add position="replace" trim="true"><![CDATA[
			'viewed'           => $query->row['viewed'],
			'add_cart'         => $query->row['add_cart']
			]]></add>
		</operation>
	</file>
	<!-- Displays the discount percentage -->
	<file path="catalog/controller/product/product.php">
		<operation error="log">
			<search><![CDATA[$special = $this->currency->format($this->tax->calculate($result['special'], $result['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = round(100-($result['special']/($result['price']/100)));
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$special = false;]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = false;
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA['special'     => $special,]]></search>
			<add position="after" trim="true"><![CDATA[
			'percent_discount' => $percent_discount,
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/manufacturer.php">
		<operation error="log">
			<search><![CDATA[$special = $this->currency->format($this->tax->calculate($result['special'], $result['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = round(100-($result['special']/($result['price']/100)));
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$special = false;]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = false;
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA['special'     => $special,]]></search>
			<add position="after" trim="true"><![CDATA[
			'percent_discount' => $percent_discount,
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/search.php">
		<operation error="log">
			<search><![CDATA[$special = $this->currency->format($this->tax->calculate($result['special'], $result['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = round(100-($result['special']/($result['price']/100)));
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$special = false;]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = false;
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA['special'     => $special,]]></search>
			<add position="after" trim="true"><![CDATA[
			'percent_discount' => $percent_discount,
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/featured.php">
		<operation error="log">
			<search><![CDATA[$special = $this->currency->format($this->tax->calculate($product_info['special'], $product_info['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = round(100-($product_info['special']/($product_info['price']/100)));
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$special = false;]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = false;
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA['special'     => $special,]]></search>
			<add position="after" trim="true"><![CDATA[
			'percent_discount' => $percent_discount,
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/bestseller.php">
		<operation error="log">
			<search><![CDATA[$special = $this->currency->format($this->tax->calculate($result['special'], $result['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = round(100-($result['special']/($result['price']/100)));
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$special = false;]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = false;
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA['special'     => $special,]]></search>
			<add position="after" trim="true"><![CDATA[
			'percent_discount' => $percent_discount,
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/latest.php">
		<operation error="log">
			<search><![CDATA[$special = $this->currency->format($this->tax->calculate($result['special'], $result['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = round(100-($result['special']/($result['price']/100)));
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$special = false;]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = false;
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA['special'     => $special,]]></search>
			<add position="after" trim="true"><![CDATA[
			'percent_discount' => $percent_discount,
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/extension/module/special.php">
		<operation error="log">
			<search><![CDATA[$special = $this->currency->format($this->tax->calculate($result['special'], $result['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = round(100-($result['special']/($result['price']/100)));
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$special = false;]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = false;
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA['special'     => $special,]]></search>
			<add position="after" trim="true"><![CDATA[
			'percent_discount' => $percent_discount,
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/category.php">
		<operation error="log">
			<search><![CDATA[$special = $this->currency->format($this->tax->calculate($result['special'], $result['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = round(100-($result['special']/($result['price']/100)));
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$special = false;]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = false;
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA['special'     => $special,]]></search>
			<add position="after" trim="true"><![CDATA[
			'percent_discount' => $percent_discount,
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/special.php">
		<operation error="log">
			<search><![CDATA[$special = $this->currency->format($this->tax->calculate($result['special'], $result['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = round(100-($result['special']/($result['price']/100)));
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$special = false;]]></search>
			<add position="after" trim="true"><![CDATA[
			$percent_discount = false;
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA['special'     => $special,]]></search>
			<add position="after" trim="true"><![CDATA[
			'percent_discount' => $percent_discount,
			]]></add>
		</operation>
	</file>
	<file path="catalog/controller/product/product.php">
		<operation error="log">
			<search><![CDATA[$data['special'] = $this->currency->format($this->tax->calculate($product_info['special'], $product_info['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);]]></search>
			<add position="after" trim="true"><![CDATA[
			$data['percent_discount'] = round(100-($product_info['special']/($product_info['price']/100)));
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[$data['special'] = false;]]></search>
			<add position="after" trim="true"><![CDATA[
			$data['percent_discount'] = false;
			]]></add>
		</operation>
	</file>
	<!-- Adding the manufacturer's logo on the product card -->
	<file path="catalog/controller/product/product.php">
		<operation error="log">
			<search><![CDATA[$this->load->model('tool/image');]]></search>
			<add position="after"><![CDATA[
			$manufacturer_image = $this->model_catalog_manufacturer->getManufacturer($product_info['manufacturer_id']);
			if($manufacturer_image) {
				$data['manufacturers_img'] = $this->model_tool_image->resize($manufacturer_image['image'], 100, 100);
				$data['img_loader'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
			} else {
				$data['manufacturers_img'] = false;
			}
			]]>
			</add>
		</operation>
	</file>
	<!-- Adding the manufacturer's logo on the manufacturer's list -->
	<file path="catalog/controller/product/manufacturer.php">
		<operation error="log">
			<search><![CDATA['href' => $this->url->link('product/manufacturer/info', 'manufacturer_id=' . $result['manufacturer_id'])]]></search>
			<add position="before"><![CDATA[
			'logo' => $this->model_tool_image->resize($result['image'], 100, 100),
			]]>
			</add>
		</operation>
	</file>
	<!-- Stock Statuses -->
	<file path="catalog/model/catalog/product.php">
		<operation error="log">
			<search><![CDATA['viewed'           => $query->row['viewed'],]]></search>
			<add position="after"><![CDATA[
			'stock_status_id'  => $query->row['stock_status_id'],
			]]>
			</add>
		</operation>
	</file>
	<file path="catalog/controller/product/product.php">
		<operation error="log">
			<search><![CDATA[$data['points'] = $product_info['points'];]]></search>
			<add position="after"><![CDATA[
			$data['stock_status_id'] = $product_info['stock_status_id'];
			]]>
			</add>
		</operation>
		<operation error="log">
			<search><![CDATA[$data['stock'] = $product_info['quantity'];]]></search>
			<add position="after"><![CDATA[
			$data['stock_color'] = "green";
			$data['stock_status'] = "http://schema.org/InStock";
			]]>
			</add>
		</operation>
		<operation error="log">
			<search><![CDATA[$data['stock'] = $this->language->get('text_instock');]]></search>
			<add position="after"><![CDATA[
			$data['stock_color'] = "green";
			$data['stock_status'] = "http://schema.org/InStock";
			]]>
			</add>
		</operation>
		<operation error="log">
			<search><![CDATA[$data['stock'] = $product_info['stock_status'];]]></search>
			<add position="after"><![CDATA[
			if($data['stock_status_id'] == 5) {
				$data['stock_color'] = "red";
				$data['stock_status'] = "http://schema.org/OutOfStock";
			} elseif ($data['stock_status_id'] == 8) {
				$data['stock_color'] = "orange";
				$data['stock_status'] = "http://schema.org/PreOrder";
			} elseif ($data['stock_status_id'] == 6) {
				$data['stock_color'] = "lime";
				$data['stock_status'] = "http://schema.org/OutOfStock";
			} elseif ($data['stock_status_id'] == 7) {
				$data['stock_color'] = "green";
				$data['stock_status'] = "http://schema.org/InStock";
			} else {
				$data['stock_color'] = "grey";
				$data['stock_status'] = "";
			}
			]]>
			</add>
		</operation>
	</file>
	<!-- Slider images on the product card -->
	<file path="catalog/controller/product/product.php">
		<operation error="log">
			<search><![CDATA[$data['popup'] = $this->model_tool_image->resize($product_info['image'], $this->config->get($this->config->get('config_theme') . '_image_popup_width'), $this->config->get($this->config->get('config_theme') . '_image_popup_height'));]]></search>
			<add position="after"><![CDATA[
			$data['popup_size'] = $this->config->get($this->config->get('config_theme') . '_image_popup_width').'x'.$this->config->get($this->config->get('config_theme') . '_image_popup_height');
			]]>
			</add>
		</operation>
		<operation error="log">
			<search><![CDATA[$data['thumb'] = $this->model_tool_image->resize($product_info['image'], $this->config->get($this->config->get('config_theme') . '_image_thumb_width'), $this->config->get($this->config->get('config_theme') . '_image_thumb_height'));]]></search>
			<add position="after"><![CDATA[
				$data['thumb_size'] = $this->config->get($this->config->get('config_theme') . '_image_thumb_width').'x'.$this->config->get($this->config->get('config_theme') . '_image_thumb_height');
			]]>
			</add>
		</operation>
		<operation error="log">
			<search><![CDATA[$data['images'] = array();]]></search>
			<add position="before"><![CDATA[
			if ($product_info['image']) {
				$data['thumb_small'] = $this->model_tool_image->resize($product_info['image'], $this->config->get($this->config->get('config_theme') . '_image_additional_width'), $this->config->get($this->config->get('config_theme') . '_image_additional_height'));
				$data['thumb_small_size'] = $this->config->get($this->config->get('config_theme') . '_image_additional_width').'x'.$this->config->get($this->config->get('config_theme') . '_image_additional_height');
			} else {
				$data['thumb_small'] = '';
			}

			$data['img_small'] = $this->config->get($this->config->get('config_theme') . '_image_additional_width').'x'.$this->config->get($this->config->get('config_theme') . '_image_additional_height');
			$data['img_big'] = $this->config->get($this->config->get('config_theme') . '_image_thumb_width').'x'.$this->config->get($this->config->get('config_theme') . '_image_thumb_height');
			]]>
			</add>
		</operation>
		<operation error="log">
			<search><![CDATA['popup' => $this->model_tool_image->resize($result['image'], $this->config->get($this->config->get('config_theme') . '_image_popup_width'), $this->config->get($this->config->get('config_theme') . '_image_popup_height')),]]></search>
			<add position="before"><![CDATA[
			'helper_thumb' => $this->model_tool_image->resize($result['image'], $this->config->get($this->config->get('config_theme') . '_image_thumb_width'), $this->config->get($this->config->get('config_theme') . '_image_thumb_height')),
			]]>
			</add>
		</operation>
	</file>
	<!-- Custom Tab -->
	<file path="catalog/controller/product/product.php">
		<operation error="log">
			<search><![CDATA[$data['images'] = array();]]></search>
			<add position="before" trim="true"><![CDATA[
			$data['customtabs'] = array();
			$results = $this->model_catalog_product->getProducttabs($this->request->get['product_id']);
			foreach ($results as $result) {
				$data['customtabs'][] = array(
					'title' => $result['title'],
					'description' => html_entity_decode($result['description'], ENT_QUOTES, 'UTF-8'),
				);
			}
			]]></add>
		</operation>
	</file>
	<file path="catalog/model/catalog/product.php">
		<operation error="log">
			<search><![CDATA[public function getProductImages($product_id) {]]></search>
			<add position="before" trim="true"><![CDATA[
			public function getProducttabs($product_id) {
				$query = $this->db->query("SELECT * FROM " . DB_PREFIX . "product_customtab pc LEFT JOIN " . DB_PREFIX . "product_customtab_description pcd ON (pc.product_customtab_id  = pcd.product_customtab_id) WHERE pc.product_id = '" . (int)$product_id . "'  AND pcd.language_id = '" . (int)$this->config->get('config_language_id') . "' AND status > 0 ORDER BY sort_order ASC");

				return $query->rows;
			}
			]]></add>
		</operation>
	</file>
	<file path="admin/controller/catalog/product.php">
		<operation error="log">
			<search><![CDATA[if (isset($this->request->post['image'])) {]]></search>
			<add position="before" trim="true"><![CDATA[
			$data['tab_customtab']=$this->language->get('tab_customtab');
			$data['entry_title']=$this->language->get('entry_title');
			$data['entry_description']=$this->language->get('entry_description');
			$data['button_customtab_add']=$this->language->get('button_customtab_add');

			if (isset($this->request->post['product_customtab'])) {
				$data['product_customtabs'] = $this->request->post['product_customtab'];
			} elseif (isset($this->request->get['product_id'])) {
				$data['product_customtabs'] = $this->model_catalog_product->getProductcustomtabs($this->request->get['product_id']);
			} else {
				$data['product_customtabs'] = array();
			}
			]]></add>
		</operation>
	</file>
	<file path="admin/model/catalog/product.php">
		<operation error="log">
			<search><![CDATA[$product_id = $this->db->getLastId();]]></search>
			<add position="after" trim="true"><![CDATA[
				if (isset($data['product_customtab'])) {
					foreach ($data['product_customtab'] as $product_customtab) {
						$this->db->query("INSERT INTO " . DB_PREFIX . "product_customtab SET product_id = '" . (int)$product_id . "',  sort_order = '" . (int)$product_customtab['sort_order'] . "', status = '" . (int)$product_customtab['status'] . "'");

						$product_customtab_id = $this->db->getLastId();

						foreach ($product_customtab['product_customtab_description'] as $language_id => $product_customtab_description) {
							$this->db->query("INSERT INTO " . DB_PREFIX . "product_customtab_description SET product_customtab_id = '" . (int)$product_customtab_id . "', language_id = '" . (int)$language_id . "', product_id = '" . (int)$product_id . "', title = '" .  $this->db->escape($product_customtab_description['title']) . "', description = '" .  $this->db->escape($product_customtab_description['description']) . "'");
						}
					}
				}
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[date_modified = NOW() WHERE product_id = '" . (int)$product_id . "'");]]></search>
			<add position="after" trim="true"><![CDATA[
				$this->db->query("DELETE FROM " . DB_PREFIX . "product_customtab WHERE product_id = '" . (int)$product_id . "'");
				$this->db->query("DELETE FROM " . DB_PREFIX . "product_customtab_description WHERE product_id = '" . (int)$product_id . "'");
				if (isset($data['product_customtab'])) {
					foreach ($data['product_customtab'] as $product_customtab) {
						$this->db->query("INSERT INTO " . DB_PREFIX . "product_customtab SET product_id = '" . (int)$product_id . "',  sort_order = '" . (int)$product_customtab['sort_order'] . "', status = '" . (int)$product_customtab['status'] . "'");

						$product_customtab_id = $this->db->getLastId();

						foreach ($product_customtab['product_customtab_description'] as $language_id => $product_customtab_description) {
							$this->db->query("INSERT INTO " . DB_PREFIX . "product_customtab_description SET product_customtab_id = '" . (int)$product_customtab_id . "', language_id = '" . (int)$language_id . "', product_id = '" . (int)$product_id . "', title = '" .  $this->db->escape($product_customtab_description['title']) . "', description = '" .  $this->db->escape($product_customtab_description['description']) . "'");
						}
					}
				}
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[public function getProductImages($product_id) {]]></search>
			<add position="before" trim="true"><![CDATA[
				public function getProductcustomtabs($product_id) {
					$product_customtab_data = array();
					$product_customtab_query = $this->db->query("SELECT * FROM " . DB_PREFIX . "product_customtab WHERE product_id = '" . (int)$product_id . "' ORDER BY sort_order ASC");
					foreach ($product_customtab_query->rows as $product_customtab) {
						$product_customtab_description_data = array();
						$product_customtab_description_query = $this->db->query("SELECT * FROM " . DB_PREFIX . "product_customtab_description WHERE product_customtab_id = '" . (int)$product_customtab['product_customtab_id'] . "' AND product_id = '" . (int)$product_id . "'");

						foreach ($product_customtab_description_query->rows as $product_customtab_description) {
							$product_customtab_description_data[$product_customtab_description['language_id']] = array(
								'title' => $product_customtab_description['title'],
								'description' => $product_customtab_description['description'],
							);
						}

						$product_customtab_data[] = array(
							'product_customtab_description' => $product_customtab_description_data,
							'status'                     => $product_customtab['status'],
							'sort_order'                    => $product_customtab['sort_order']
						);
					}
					return $product_customtab_data;
				}
			]]></add>
		</operation>
	</file>
	<file path="admin/view/template/catalog/product_form.tpl">
		<operation error="log">
			<search><![CDATA[<li><a href="#tab-design" data-toggle="tab"><?php echo $tab_design; ?></a></li>]]></search>
			<add position="after" trim="true"><![CDATA[
				<li><a href="#tab-customtabmain" data-toggle="tab"><?php echo $tab_customtab; ?></a></li>
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[<div class="tab-pane" id="tab-design">]]></search>
			<add position="before" trim="true"><![CDATA[
			<div class="tab-pane" id="tab-customtabmain">
				 <div class="col-sm-2">
				  <ul class="nav nav-pills nav-stacked" id="customtab">
					<?php $customtab_row = 0; ?>
					<?php foreach ($product_customtabs as $product_customtab) { ?>
					<li><a href="#tab-customtab<?php echo $customtab_row; ?>" data-toggle="tab"><i class="fa fa-minus-circle" onclick="$('a[href=\'#tab-customtab<?php echo $customtab_row; ?>\']').parent().remove(); $('#tab-customtab<?php echo $customtab_row; ?>').remove(); $('#customtab a:first').tab('show');"></i> <?php echo $tab_customtab . ' ' . $customtab_row; ?></a></li>
					<?php $customtab_row++; ?>
					<?php } ?>
					<li id="customtab-add"><a onclick="addCustomtab();"><i class="fa fa-plus-circle"></i> <?php echo $button_customtab_add; ?></a></li>
				  </ul>
				</div>
			<div class="col-sm-10">
              <div class="tab-content tab-content2">
                <?php $customtab_row = 0; ?>
				<?php foreach ($product_customtabs as $product_customtab) { ?>
                <div class="tab-pane" id="tab-customtab<?php echo $customtab_row; ?>">
                  <ul class="nav nav-tabs" id="clanguage<?php echo $customtab_row; ?>">
                    <?php foreach ($languages as $language) { ?>
                    <li><a href="#tab-customtab<?php echo $customtab_row; ?>-language<?php echo $language['language_id']; ?>" data-toggle="tab"><img src="language/<?php echo $language['code']; ?>/<?php echo $language['code']; ?>.png" title="<?php echo $language['name']; ?>" />  <?php echo $language['name']; ?></a></li>
                    <?php } ?>
                  </ul>
                  <div class="tab-content">
                    <?php foreach ($languages as $language) { ?>
                    <div class="tab-pane" id="tab-customtab<?php echo $customtab_row; ?>-language<?php echo $language['language_id']; ?>">
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-heading<?php echo $customtab_row; ?>-language<?php echo $language['language_id']; ?>"><?php echo $entry_title; ?></label>
                        <div class="col-sm-10">
                          <input type="text" name="product_customtab[<?php echo $customtab_row; ?>][product_customtab_description][<?php echo $language['language_id']; ?>][title]" value="<?php echo isset($product_customtab['product_customtab_description'][$language['language_id']]) ? $product_customtab['product_customtab_description'][$language['language_id']]['title'] : ''; ?>" class="form-control"/>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-description<?php echo $customtab_row; ?>-language<?php echo $language['language_id']; ?>"><?php echo $entry_description; ?></label>
                        <div class="col-sm-10">
                          <textarea name="product_customtab[<?php echo $customtab_row; ?>][product_customtab_description][<?php echo $language['language_id']; ?>][description]" placeholder="<?php echo $entry_description; ?>" id="input-description<?php echo $customtab_row; ?>-language<?php echo $language['language_id']; ?>" class="form-control"><?php echo isset($product_customtab['product_customtab_description'][$language['language_id']]) ? $product_customtab['product_customtab_description'][$language['language_id']]['description'] : ''; ?></textarea>
                        </div>
                      </div>
                    </div>
                    <?php } ?>
                  </div>
					<div class="form-group">
                        <label class="col-sm-2 control-label" for="input-sort_order<?php echo $customtab_row; ?>"><?php echo $entry_sort_order; ?></label>
                        <div class="col-sm-10">
                         <input type="text" name="product_customtab[<?php echo $customtab_row; ?>][sort_order]" value="<?php echo $product_customtab['sort_order']; ?>" placeholder="<?php echo $entry_sort_order; ?>" class="form-control" />
                        </div>
					</div>
					<div class="form-group">
                        <label class="col-sm-2 control-label" for="input-status<?php echo $customtab_row; ?>"><?php echo $entry_sort_order; ?></label>
                        <div class="col-sm-10">
                        <select name="product_customtab[<?php echo $customtab_row; ?>][status]" id="input-status" class="form-control">
						<?php if ($product_customtab['status']) { ?>
						<option value="1" selected="selected"><?php echo $text_enabled; ?></option>
						<option value="0"><?php echo $text_disabled; ?></option>
						<?php } else { ?>
						<option value="1"><?php echo $text_enabled; ?></option>
						<option value="0" selected="selected"><?php echo $text_disabled; ?></option>
						<?php } ?>
					  </select>
                        </div>
					</div>
				  </div>
				<?php $customtab_row++; ?>
                <?php } ?>
              </div>
            </div>
			</div>
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[<?php echo $footer; ?>]]></search>
			<add position="before" trim="true"><![CDATA[
				<script type="text/javascript"><!--
					<?php $customtab_row = 0; ?>
					<?php foreach ($product_customtabs as $product_customtab) { ?>
					<?php foreach ($languages as $language) { ?>
					$('#input-description<?php echo $customtab_row; ?>-language<?php echo $language['language_id']; ?>').summernote({
						height: 300
					});
					<?php } ?>
					<?php $customtab_row++; ?>
					<?php } ?>
				//--></script>
				<script type="text/javascript"><!--
					var customtab_row = <?php echo $customtab_row; ?>;
					function addCustomtab() {
						html  = '<div id="tab-customtab' + customtab_row + '" class="tab-pane">';
						html += '  <ul class="nav nav-tabs" id="clanguage' + customtab_row + '">';
					    <?php foreach ($languages as $language) { ?>
					     html += '    <li><a href="#tab-customtab' + customtab_row + '-language<?php echo $language['language_id']; ?>" data-toggle="tab"><img src="language/<?php echo $language['code']; ?>/<?php echo $language['code']; ?>.png" title="<?php echo $language['name']; ?>" /> <?php echo $language['name']; ?></a></li>';
					    <?php } ?>
						html += '  </ul>';

						html += '  <div class="tab-content">';
						<?php foreach ($languages as $language) { ?>
						html += '    <div class="tab-pane" id="tab-customtab' + customtab_row + '-language<?php echo $language['language_id']; ?>">';
						html += '      <div class="form-group">';
						html += '        <label class="col-sm-2 control-label" for="input-title' + customtab_row + '-language<?php echo $language['language_id']; ?>"><?php echo $entry_title; ?></label>';
						html += '        <div class="col-sm-10"><input type="text" name="product_customtab[' + customtab_row + '][product_customtab_description][<?php echo $language['language_id']; ?>][title]" placeholder="<?php echo $entry_title; ?>" id="input-title' + customtab_row + '-language<?php echo $language['language_id']; ?>" value="" class="form-control"/></div>';
						html += '      </div>';
						html += '      <div class="form-group">';
						html += '        <label class="col-sm-2 control-label" for="input-description' + customtab_row + '-language<?php echo $language['language_id']; ?>"><?php echo $entry_description; ?></label>';
						html += '        <div class="col-sm-10"><textarea name="product_customtab[' + customtab_row + '][product_customtab_description][<?php echo $language['language_id']; ?>][description]" id="input-description' + customtab_row + '-language<?php echo $language['language_id']; ?>"></textarea></div>';
						html += '      </div>';
						html += '    </div>';
						<?php } ?>
						html += '  </div>';
						html += '      <div class="form-group">';
						html += '        <label class="col-sm-2 control-label" for="input-status' + customtab_row +'"><?php echo $entry_status; ?></label>';
						html += '        <div class="col-sm-10"><select name="product_customtab[' + customtab_row + '][status]" class="form-control"><option value="1"><?php echo $text_enabled; ?></option><option value="0"><?php echo $text_disabled; ?></option></select></div>';
						html += '      </div>';
						html += '  <div class="form-group">';
						html += '<label class="col-sm-2 control-label" for="input-sort_order' + customtab_row +'"><?php echo $entry_sort_order; ?></label>';
						html += ' <div class="col-sm-10"><input type="text" name="product_customtab[' + customtab_row + '][sort_order]" value="" class="form-control" /></div>';
						html += '</div>';
						html += '</div>';
						$('#tab-customtabmain .tab-content2').append(html);
						<?php foreach ($languages as $language) { ?>
						$('#input-description' + customtab_row + '-language<?php echo $language['language_id']; ?>').summernote({
							height: 300
						});
					<?php } ?>
					$('#customtab a[href=\'#tab-customtab' + customtab_row + '\']').tab('show');
					$('#clanguage' + customtab_row + ' li:first-child a').tab('show');
					$('#customtab-add').before('<li><a href="#tab-customtab' + customtab_row + '" data-toggle="tab"><i class="fa fa-minus-circle" onclick="$(\'a[href=\\\'#tab-customtab' + customtab_row + '\\\']\').parent().remove(); $(\'#tab-customtab' + customtab_row + '\').remove(); $(\'#customtab li a:first\').tab(\'show\');"></i> <?php echo $tab_customtab; ?> ' + customtab_row + '</a></li>');
					$('#customtab-' + customtab_row).trigger('click');
					customtab_row++;
					}
				//--></script>
				<script type="text/javascript"><!--
					$('#customtab li:first-child a').tab('show');
					<?php $customtab_row = 0; ?>
					<?php foreach ($product_customtabs as $product_customtab) { ?>
					$('#clanguage<?php echo $customtab_row; ?> li:first-child a').tab('show');
					<?php $customtab_row++; ?>
					<?php } ?>
				//--></script>
			]]></add>
		</operation>
	</file>
	<!-- Apply button -->
	<file path="admin/controller/catalog/product.php">
		<operation error="log">
			<search><![CDATA[public function autocomplete()]]></search>
			<add position="before" trim="true"><![CDATA[
		       	public function updateStay() {
					$this->load->language('catalog/product');
				    $this->document->setTitle($this->language->get('heading_title'));
				    $this->load->model('catalog/product');
				if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->validateForm()) {
					$this->model_catalog_product->editProduct($this->request->get['product_id'], $this->request->post);
					$this->session->data['success'] = $this->language->get('text_success');
					$url = '';
		        if (isset($this->request->get['product_id'])) {
					$url .= '&product_id=' . $this->request->get['product_id'];
				}
		            $this->response->redirect($this->url->link('catalog/product/edit', 'token=' . $this->session->data['token'] . $url, true));
				}
				$this->getForm();
				}
			]]></add>
		</operation>
		<operation error="log">
			<search index="0"><![CDATA[$data['action']]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['action_stay'] = $this->url->link('catalog/product/add', 'token=' . $this->session->data['token'] . $url, true);
			]]></add>
		</operation>
		<operation error="log">
			<search index="1"><![CDATA[$data['action']]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['action_stay'] = $this->url->link('catalog/product/updateStay', 'token=' . $this->session->data['token'] . '&product_id=' . $this->request->get['product_id'] . $url, true);
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[catalog/product_form]]></search>
			<add position="before" trim="true"><![CDATA[
				if (isset($this->session->data['success'])) {
					$data['success'] = $this->session->data['success'];
					unset($this->session->data['success']);
				} else {
					$data['success'] = '';
				}
			]]></add>
		</operation>
	</file>
	<file path="admin/view/template/catalog/product_form.tpl">
		<operation error="log">
			<search><![CDATA[<div class="panel panel-default">]]></search>
			<add position="replace" trim="true"><![CDATA[
				<?php if ($success) { ?>
			    <div class="alert alert-success"><i class="fa fa-check-circle"></i> <?php echo $success; ?>
			      <button type="button" class="close" data-dismiss="alert">&times;</button>
			    </div>
			    <?php } ?>
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[<ul class="nav nav-tabs">]]></search>
			<add position="replace" trim="true"><![CDATA[
				<ul class="nav nav-tabs" id="myTab">
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[<div class="pull-right">]]></search>
			<add position="after" trim="true"><![CDATA[
				<button type="button" onclick="SaS();" type="button" form="form-product" data-toggle="tooltip" title="Применить" class="btn btn-success
					"><i class="fa fa-repeat"></i></button>]]>
			</add>
		</operation>
		<operation error="log">
		<search><![CDATA[<?php echo $footer; ?>]]></search>
			<add position="before" trim="true"><![CDATA[
				<script type="text/javascript"><!--
				$(document).ready(function() {
				if (sessionStorage['index_p']) {
				var index_p = sessionStorage['index_p'];
				       } else {
				var index_p = 0;
				       }
				$('#myTab li:eq(' + index_p + ') a').tab('show');
				sessionStorage['index_p'] = 0;
				});
				function SaS() {
				   sessionStorage['index_p'] = $(".nav-tabs .active").index();
				   $('#form-product').attr('action', '<?php echo (htmlspecialchars_decode($action_stay)); ?>');
				   $('#form-product').submit();
				   e.preventDefault();
				};
				//--></script>
			]]></add>
		</operation>
	</file>
	<file path="admin/controller/catalog/category.php">
		<operation error="log">
			<search><![CDATA[public function autocomplete()]]></search>
			<add position="before" trim="true"><![CDATA[
		       	public function updateStay() {
					$this->load->language('catalog/category');
				    $this->document->setTitle($this->language->get('heading_title'));
				    $this->load->model('catalog/category');
				if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->validateForm()) {
					$this->model_catalog_category->editCategory($this->request->get['category_id'], $this->request->post);
					$this->session->data['success'] = $this->language->get('text_success');
					$url = '';
		        if (isset($this->request->get['category_id'])) {
					$url .= '&category_id=' . $this->request->get['category_id'];
				}
		            $this->response->redirect($this->url->link('catalog/category/edit', 'token=' . $this->session->data['token'] . $url, true));
				}
					$this->getForm();
				}
			]]></add>
		</operation>
		<operation error="log">
			<search index="0"><![CDATA[$data['action']]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['action_stay'] = $this->url->link('catalog/category/add', 'token=' . $this->session->data['token'] . $url, true);
			]]></add>
        </operation>
        <operation error="log">
			<search index="1"><![CDATA[$data['action']]]></search>
			<add position="after" trim="true"><![CDATA[
				$data['action_stay'] = $this->url->link('catalog/category/updateStay', 'token=' . $this->session->data['token'] . '&category_id=' . $this->request->get['category_id'] . $url, true);
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[catalog/category_form]]></search>
			<add position="before" trim="true"><![CDATA[
				if (isset($this->session->data['success'])) {
					$data['success'] = $this->session->data['success'];
					unset($this->session->data['success']);
				} else {
					$data['success'] = '';
				}
			]]></add>
		</operation>
	</file>
	<file path="admin/view/template/catalog/category_form.tpl">
		<operation error="log">
			<search><![CDATA[<div class="panel panel-default">]]></search>
			<add position="replace" trim="true"><![CDATA[
				<?php if ($success) { ?>
			    <div class="alert alert-success"><i class="fa fa-check-circle"></i> <?php echo $success; ?>
			      <button type="button" class="close" data-dismiss="alert">&times;</button>
			    </div>
			    <?php } ?>
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[<ul class="nav nav-tabs">]]>  </search>
			<add position="replace" trim="true"><![CDATA[
            	<ul class="nav nav-tabs" id="myTab">
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[<div class="pull-right">]]>  </search>
			<add position="after" trim="true"><![CDATA[
				<button type="button" onclick="SaS();" type="button" form="form-category" data-toggle="tooltip" title="Применить" class="btn btn-success"><i class="fa fa-repeat"></i></button>
			]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[<?php echo $footer; ?>]]></search>
			<add position="before" trim="true"><![CDATA[
				<script type="text/javascript"><!--
				$(document).ready(function() {
				if (sessionStorage['index_p']) {
				var index_p = sessionStorage['index_p'];
				       } else {
				var index_p = 0;
				       }
				$('#myTab li:eq(' + index_p + ') a').tab('show');
				sessionStorage['index_p'] = 0;
				});
				function SaS() {
				   sessionStorage['index_p'] = $(".nav-tabs .active").index();
				   $('#form-category').attr('action', '<?php echo (htmlspecialchars_decode($action_stay)); ?>');
				   $('#form-category').submit();
				   e.preventDefault();
				};
				//--></script>
			]]></add>
		</operation>
	</file>
</modification>